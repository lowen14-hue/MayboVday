<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Quest RPG ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* Fullscreen map */
body, html {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(180deg,#87CEFA,#E0F7FA);
}

/* Game container */
.game {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* Terrain animations */
.cloud, .bird {
  position: absolute;
  z-index: 1;
}
.cloud {
  font-size: 3rem;
  opacity: 0.8;
  animation: cloudMove linear infinite;
}
.bird {
  font-size: 2rem;
  animation: birdMove linear infinite;
}

/* Cloud movement */
@keyframes cloudMove {
  from { left: -10%; top: var(--top); }
  to { left: 110%; top: var(--top); }
}

/* Bird movement */
@keyframes birdMove {
  from { left: -10%; top: var(--top); transform: rotate(0deg);}
  to { left: 110%; top: var(--top); transform: rotate(15deg);}
}

/* Progress bar */
#progressBar {
  position: absolute;
  top: 0;
  left: 0;
  height: 24px;
  width: 100%;
  background: #eee;
  z-index: 20;
}
#progressFill {
  height: 100%;
  width: 0%;
  background: #ff6f91;
  transition: width 0.5s ease;
}

/* Paths */
svg {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
}
path {
  stroke: #ff6f91;
  stroke-width: 8;
  fill: none;
  stroke-linecap: round;
  stroke-dasharray: 600;
  stroke-dashoffset: 600;
  animation: draw 1.8s forwards;
}
@keyframes draw { to { stroke-dashoffset: 0; } }

/* Landmarks */
.landmark {
  position: absolute;
  font-size: 2.5rem;
  cursor: pointer;
  transition: transform 0.3s;
  z-index: 3;
}
.landmark.locked { opacity: 0.4; pointer-events: none; }
.landmark:hover:not(.locked) { transform: scale(1.3) rotate(-5deg); }

/* Player avatar */
#player {
  position: absolute;
  font-size: 3rem;
  z-index: 4;
  transition: top 0.8s ease, left 0.8s ease;
}

/* Modal */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 30;
}
.modal-content {
  background: white;
  padding: 30px;
  border-radius: 15px;
  text-align: center;
  width: 90%;
  max-width: 450px;
}
.modal-content input, .modal-content button {
  width: 90%;
  padding: 10px;
  font-size: 1rem;
  margin-top: 10px;
}

/* Floating effects */
.effect {
  position: fixed;
  font-size: 2rem;
  animation: float 3s linear forwards;
  pointer-events: none;
  z-index: 15;
}
@keyframes float {
  to { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
}

/* Flashing No screen */
.flashRed {
  animation: flashred 0.2s infinite alternate;
  z-index: 50;
}
@keyframes flashred { from {background: red;} to {background: white;} }

</style>
</head>

<body>

<div class="game" id="game">

  <!-- Progress bar -->
  <div id="progressBar">
    <div id="progressFill"></div>
  </div>

  <!-- Paths -->
  <svg>
    <path d="M120,120 C240,160 360,80 480,120"></path>
    <path d="M480,120 C540,160 480,240 420,280"></path>
    <path d="M420,280 C540,320 660,240 780,280"></path>
    <path d="M780,280 C820,320 740,420 680,460"></path>
    <path d="M680,460 C760,500 840,420 900,460"></path>
    <path d="M900,460 C940,500 980,360 980,300"></path>
    <path d="M980,300 C1020,260 1000,160 940,120"></path>
  </svg>

  <!-- Landmarks -->
  <div class="landmark" data-level="0" style="top:100px; left:100px;">ğŸŒ²</div>
  <div class="landmark locked" data-level="1" style="top:120px; left:360px;">ğŸ“¸</div>
  <div class="landmark locked" data-level="2" style="top:300px; left:340px;">ğŸï¸</div>
  <div class="landmark locked" data-level="3" style="top:340px; left:540px;">ğŸ</div>
  <div class="landmark locked" data-level="4" style="top:500px; left:500px;">ğŸ¶</div>
  <div class="landmark locked" data-level="5" style="top:500px; left:680px;">ğŸ¦–</div>
  <div class="landmark locked" data-level="6" style="top:350px; left:820px;">âš“</div>
  <div class="landmark locked" data-level="7" style="top:100px; left:920px;">ğŸ°</div>

  <!-- Player -->
  <div id="player">ğŸ‘©</div>

</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content" id="modalContent"></div>
</div>

<!-- Background music -->
<audio id="bgMusic" src="https://assets.mixkit.co/music/preview/mixkit-love-ballad-romantic-1277.mp3" loop autoplay></audio>

<!-- Sound effect -->
<audio id="ding" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.wav"></audio>

<script>
// Variables
const landmarks = document.querySelectorAll('.landmark');
const player = document.getElementById('player');
const modal = document.getElementById('modal');
const modalContent = document.getElementById('modalContent');
const progressFill = document.getElementById('progressFill');
const ding = document.getElementById('ding');
let progress = 0;

const challenges = [
  { text: "Where did we go the first time I knew I loved you?", answer: "sargent peps" },
  { text: "Where was our first photo taken?", answer: "towers girls bathroom" },
  { text: "Where were we when I surprised you in Florida?", answer: "st armands circle" },
  { text: "ğŸ What is our favorite meal that I make soooo good?", answer: "shrimp scampi" },
  { text: "ğŸ¶ What was the name of our AI dog?", answer: "chase" },
  { text: "ğŸ¦– RAWR! Danny the dinosaur is jamming â€” what is his favorite song?", answer: "dancing in the moonlight" },
  { text: "âš“ğŸŒŠ Ahoy! Best place Iâ€™ve ever taken you to eat?", answer: "cliff house" }
];

function normalize(str) { return str.toLowerCase().replace(/[^a-z0-9\s]/g, ''); }

// Initialize player position
function updatePlayerPosition(i){
  const rect = landmarks[i].getBoundingClientRect();
  const board = document.getElementById('game').getBoundingClientRect();
  player.style.top = (rect.top - board.top) + 'px';
  player.style.left = (rect.left - board.left) + 'px';
  progressFill.style.width = ((i / (landmarks.length - 1)) * 100) + '%';
}

// Initial
updatePlayerPosition(0);

// Landmark click
landmarks.forEach(l=>{
  l.addEventListener('click', ()=>{
    const i=parseInt(l.dataset.level);
    if(i!==progress) return;
    if(i<challenges.length) openChallenge(i);
    else showFinal();
  });
});

// Open challenge
function openChallenge(i){
  modal.style.display='flex';
  modalContent.innerHTML=`<h2>${challenges[i].text}</h2>
    <input id="answer" placeholder="Your answer..."/>
    <br><br>
    <button onclick="checkAnswer(${i})">Submit</button>`;
}

// Check answer
function checkAnswer(i){
  const user=normalize(document.getElementById('answer').value);
  const target=normalize(challenges[i].answer).split(' ');
  const correct=target.every(word=>user.includes(word));
  if(!correct){ alert("Not quite ğŸ˜ try again"); return; }

  modal.style.display='none';
  landmarks[i].classList.remove('locked');
  landmarks[i].style.transform='scale(1.6)';
  setTimeout(()=> landmarks[i].style.transform='', 400);
  progress++;
  updatePlayerPosition(i);

  ding.play(); // sound effect
  spawnEffects(['ğŸ’–','âœ¨'],30);
}

// Final screen
function showFinal(){
  modal.style.display='flex';
  modalContent.innerHTML=`<h2>ğŸ’˜ You made it!</h2>
    <p>Will you be my Valentine?</p>
    <button onclick="yes()">Yes ğŸ’•</button>
    <button onclick="nope()" style="background:#555;color:white;">No</button>`;
}
function nope(){
  modalContent.innerHTML=`<div class="flashRed"><div style="font-size:5rem">ğŸƒ</div><h2>Get Fucked</h2></div>`;
  setTimeout(showFinal,10000);
}
function yes(){
  modalContent.innerHTML=`<h2>ğŸ¥° Yes! ğŸ¥°</h2><p>I knew it!</p>`;
  spawnEffects(['ğŸ‰','ğŸ’—'],60);
}

// Floating effects
function spawnEffects(symbols,count){
  for(let i=0;i<count;i++){
    const e=document.createElement('div');
    e.className='effect';
    e.textContent=symbols[Math.floor(Math.random()*symbols.length)];
    e.style.left=Math.random()*100+'vw';
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),3000);
  }
}

// Terrain: clouds and birds
function createTerrain(){
  for(let i=0;i<5;i++){
    const cloud=document.createElement('div');
    cloud.className='cloud';
    cloud.style.setProperty('--top',Math.random()*40+'%');
    cloud.textContent='â˜ï¸';
    cloud.style.animationDuration=(30+Math.random()*20)+'s';
    document.getElementById('game').appendChild(cloud);
  }
  for(let i=0;i<3;i++){
    const bird=document.createElement('div');
    bird.className='bird';
    bird.style.setProperty('--top',Math.random()*60+20+'%');
    bird.textContent='ğŸ¦';
    bird.style.animationDuration=(15+Math.random()*10)+'s';
    document.getElementById('game').appendChild(bird);
  }
}
createTerrain();

</script>
</body>
</html>
