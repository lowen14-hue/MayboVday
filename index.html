<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Quest RPG üéÆüíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* BODY */
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(180deg,#87CEFA,#fff4e6);
  overflow: hidden;
}

/* GAME BOARD */
.game {
  position: relative;
  width: 95%;
  max-width: 1000px;
  height: 90vh;
  margin: auto;
  background: linear-gradient(to bottom, #c1f0c1 0%, #f0e0d0 100%);
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  overflow: hidden;
}

/* SVG PATHS */
svg {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}
path {
  stroke: #ff69b4;
  stroke-width: 6;
  fill: none;
  stroke-linecap: round;
  stroke-dasharray: 500;
  stroke-dashoffset: 500;
  animation: drawPath 2s forwards;
}
@keyframes drawPath {
  to { stroke-dashoffset: 0; }
}

/* LANDMARK ICONS */
.landmark {
  position: absolute;
  width: 80px;
  height: 80px;
  cursor: pointer;
  transition: transform 0.3s, filter 0.3s;
  z-index: 5;
}
.landmark img {
  width: 100%;
  height: 100%;
}
.landmark.locked img { filter: grayscale(100%) brightness(1.2); }
.landmark.completed img { animation: glow 1s infinite alternate; }
.landmark:hover:not(.locked) { transform: scale(1.25); }
@keyframes glow {
  from { filter: drop-shadow(0 0 6px #ff69b4); }
  to { filter: drop-shadow(0 0 16px #ff69b4); }
}

/* PLAYER AVATAR */
#player {
  position: absolute;
  width: 60px;
  height: 60px;
  z-index: 10;
  transition: top 1s ease, left 1s ease;
}

/* MODAL */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 20;
}
.modal-content {
  background: white;
  padding: 30px;
  border-radius: 15px;
  max-width: 400px;
  width: 90%;
  text-align: center;
}
.modal-content input, .modal-content button {
  width: 90%;
  padding: 10px;
  font-size: 1rem;
  margin-top: 10px;
}

/* EFFECTS */
.effect {
  position: fixed;
  font-size: 2rem;
  animation: floatUp 3s linear forwards;
  pointer-events: none;
  z-index: 15;
}
@keyframes floatUp {
  from { transform: translateY(0) rotate(0deg); opacity:1; }
  to { transform: translateY(-100vh) rotate(360deg); opacity:0; }
}

/* FLASH RED FOR NO */
.flashRed {
  animation: flashRed 0.15s infinite alternate;
  text-align:center;
}
@keyframes flashRed {
  from { background: red; }
  to { background: #fff; }
}
</style>
</head>

<body>
<div class="game" id="game">

  <!-- SVG paths -->
  <svg id="paths">
    <path id="p0" d="M120,90 C200,120 300,60 380,100"></path>
    <path id="p1" d="M380,100 C460,140 380,200 300,230"></path>
    <path id="p2" d="M300,230 C380,260 500,200 580,240"></path>
    <path id="p3" d="M580,240 C620,280 550,350 500,390"></path>
    <path id="p4" d="M500,390 C580,420 650,360 720,390"></path>
    <path id="p5" d="M720,390 C780,420 820,300 860,240"></path>
    <path id="p6" d="M860,240 C940,200 920,100 900,40"></path>
  </svg>

  <!-- LANDMARKS -->
  <div class="landmark" data-level="0" style="top:60px; left:100px;">
    <img src="https://i.imgur.com/8Z5b9mD.png" alt="Forest">
  </div>
  <div class="landmark locked" data-level="1" style="top:80px; left:360px;">
    <img src="https://i.imgur.com/q8yVRJk.png" alt="Camera">
  </div>
  <div class="landmark locked" data-level="2" style="top:220px; left:300px;">
    <img src="https://i.imgur.com/IxFJ0Ih.png" alt="Beach">
  </div>
  <div class="landmark locked" data-level="3" style="top:260px; left:500px;">
    <img src="https://i.imgur.com/m7hVKsm.png" alt="Pasta">
  </div>
  <div class="landmark locked" data-level="4" style="top:380px; left:460px;">
    <img src="https://i.imgur.com/NxLg44X.png" alt="Dog Park">
  </div>
  <div class="landmark locked" data-level="5" style="top:380px; left:640px;">
    <img src="https://i.imgur.com/l3E4Sft.png" alt="Dino">
  </div>
  <div class="landmark locked" data-level="6" style="top:240px; left:780px;">
    <img src="https://i.imgur.com/MRmkzkl.png" alt="Anchor">
  </div>
  <div class="landmark locked" data-level="7" style="top:20px; left:900px;">
    <img src="https://i.imgur.com/UkVm2Z9.png" alt="Castle">
  </div>

  <!-- Player avatar -->
  <img id="player" src="https://i.imgur.com/4AiXzf8.png" alt="Player">

</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content" id="modalContent"></div>
</div>

<script>
const landmarks = document.querySelectorAll('.landmark');
const player = document.getElementById('player');
const modal = document.getElementById('modal');
const modalContent = document.getElementById('modalContent');
let progress = 0;

const challenges = [
  { text: "Where did we go the first time I knew I loved you?", answer: "sargent peps" },
  { text: "Where was our first photo taken?", answer: "towers girls bathroom" },
  { text: "Where were we when I surprised you in Florida?", answer: "st armand's circle" },
  { text: "üçù What is our favorite meal that I make soooo good?", answer: "shrimp scampi" },
  { text: "üê∂ What was the name of our AI dog?", answer: "chase" },
  { text: "ü¶ñ RAWR! Danny the dinosaur is jamming ‚Äî what is his favorite song?", answer: "dancing in the moonlight" },
  { text: "‚öìüåä Ahoy! Best place I‚Äôve ever taken you to eat?", answer: "cliff house" }
];

function normalize(s){ return s.toLowerCase().replace(/[^a-z0-9\s]/g,''); }

landmarks.forEach(l => {
  l.addEventListener('click', () => {
    const i = Number(l.dataset.level);
    if(i!==progress) return;
    if(i<challenges.length) openChallenge(i);
    else showFinal();
  });
});

function openChallenge(i){
  modal.style.display = 'flex';
  modalContent.innerHTML = `<h2>${challenges[i].text}</h2>
    <input id="answer" placeholder="Your answer..."/>
    <br><br>
    <button onclick="checkAnswer(${i})">Submit</button>`;
}

function checkAnswer(i){
  const user = normalize(document.getElementById('answer').value);
  const target = normalize(challenges[i].answer).split(' ');
  const correct = target.every(word=>user.includes(word));
  if(!correct){ alert("Not quite üòè try again"); return; }

  modal.style.display='none';
  landmarks[i].classList.add('completed');
  progress++;
  landmarks[progress]?.classList.remove('locked');

  // Move player avatar to new landmark
  const rect = landmarks[i].getBoundingClientRect();
  const gameRect = document.getElementById('game').getBoundingClientRect();
  player.style.top = rect.top - gameRect.top + 10 + 'px';
  player.style.left = rect.left - gameRect.left + 10 + 'px';

  spawnEffects(['üíñ','‚ú®'],25);
}

function showFinal(){
  modal.style.display='flex';
  modalContent.innerHTML = `<h2>üíò You made it!</h2>
    <p>Will you be my Valentine?</p>
    <button onclick="yes()">Yes üíï</button>
    <button onclick="nope()" style="background:#555;color:white;">No</button>`;
}

function nope(){
  modalContent.innerHTML = `<div class="flashRed"><div style="font-size:5rem">üÉè</div><h2>Get Fucked</h2></div>`;
  setTimeout(()=>{ showFinal(); },10000);
}

function yes(){
  modalContent.innerHTML = `<h2>ü•∞ Yes! ü•∞</h2><p>I knew it!</p>`;
  spawnEffects(['üéâ','üíó'],50);
}

function spawnEffects(symbols,count=10){
  for(let i=0;i<count;i++){
    const e=document.createElement('div');
    e.className='effect';
    e.textContent=symbols[Math.floor(Math.random()*symbols.length)];
    e.style.left=Math.random()*100+'vw';
    e.style.animationDuration=2+Math.random()*2+'s';
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),3000);
  }
}

// Initialize player on first landmark
const rect = landmarks[0].getBoundingClientRect();
const gameRect = document.getElementById('game').getBoundingClientRect();
player.style.top = rect.top - gameRect.top + 10 + 'px';
player.style.left = rect.left - gameRect.left + 10 + 'px';
</script>

</body>
</html>
